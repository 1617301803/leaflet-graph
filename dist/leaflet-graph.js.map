{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5ad35c8454accbd5efa4","webpack:///external \"L\"","webpack:///./src/core/defaultValue.js","webpack:///./src/core/inherit.js","webpack:///./src/components/graph/Graph.js","webpack:///./src/components/graph/leaflet-graph.js","webpack:///./src/core/Color.js","webpack:///./src/index.js","webpack:///./src/components/bubble/leaflet-bubbles.js","webpack:///./src/components/bubble/Bubbles.js","webpack:///./src/animation/Animation.js","webpack:///./src/animation/requestAnimationFrame.js","webpack:///./src/core/defined.js","webpack:///./src/core/guid.js","webpack:///./src/core/createCanvas.js","webpack:///./src/components/point/leaflet-points.js","webpack:///./src/components/point/Points.js","webpack:///./src/components/image/leaflet-images.js","webpack:///./src/components/image/Images.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA,+C;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,E;;;;;;;ACVA;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;ACnBkB;AACG;AACL;AACH;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oHAAgD;;AAEhD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,SAAS;AACnD;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;AC5KA;;AAEqB;AACA;;AAErB;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,0CAA0C,SAAS;AACnD;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,CAAC,E;;;;;;;ACnKD;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0BAA0B;AAC1B,sBAAsB;AACtB;AACA;;AAEA,2BAA2B;AAC3B,sBAAsB;AACtB;AACA;;AAEA,2BAA2B;AAC3B;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA2C;AAC3C;;AAEA;AACA;AACA;AACA,iDAAiD;AACjD;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iDAAiD;AACjD;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEQ;;;;;;;;;;;;;;;;;;;;AC9TR;AACA;AACA;;;;;;;;;;;;ACFA;;AAEgB;AACG;;;;AAInB;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,gDAAgD,SAAS;AACzD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;;AAED;AACA;AACA;;;;;;;;;;;;ACnDc;AACE;;AAEF;;AAEd;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6I;;;;;;;;;;AC7C8B;AACT;;AAErB;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;ACvJA;AACA;AACA;AACA;AACA;;;;;;;;;;ACJA;AACA;AACA,C;;;;;;;ACFA;AAAA;;AAEA;AACA;AACA,C;;;;;;;;;;ACJA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,C;;;;;;;;;;;AChBA;;AAEe;AACI;;;;AAInB;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,gDAAgD,SAAS;AACzD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;;AAED;AACA;AACA;;;;;;;;;;;;;ACnDc;AACE;AACK;;AAEP;;AAEd;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4I;;;;;;;;;;;AChDA;;AAEe;AACI;;;AAGnB;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,gDAAgD,SAAS;AACzD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;;AAED;AACA;AACA;;;;;;;;;;;;ACjDgB;AACK;;AAEP;;AAEd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,SAAS;AACnE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4I","file":"leaflet-graph.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"L\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"L\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"leaflet-graph\"] = factory(require(\"L\"));\n\telse\n\t\troot[\"leaflet-graph\"] = factory(root[\"L\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5ad35c8454accbd5efa4","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"L\"\n// module id = 0\n// module chunks = 0","export function defaultValue(a, b) {\r\n    if (a !== undefined && a !== null) {\r\n        return a;\r\n    }\r\n    return b;\r\n}\r\n\r\ndefaultValue.EMPTY_OBJECT = {};\r\n\r\ndefaultValue.EMPTY_FUNCTION = function () {\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/defaultValue.js\n// module id = 1\n// module chunks = 0","Object.create = Object.create || (function () {\r\n        function F() {\r\n        }\r\n\r\n        return function (obj) {\r\n            F.prototype = obj;\r\n            return new F();\r\n        }\r\n    })();\r\n\r\nexport function inherit(subClass, baseClass) {\r\n    var subClassProto = subClass.prototype;\r\n\r\n    subClass.prototype = Object.create(baseClass.prototype);\r\n\r\n    for (var key in subClassProto) {\r\n        subClass.prototype[key] = subClassProto[key];\r\n    }\r\n    subClass.prototype.constructor = subClass;\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/inherit.js\n// module id = 2\n// module chunks = 0","import {Animation} from '../../animation/Animation';\r\nimport {defaultValue} from '../../core/defaultValue';\r\nimport {defined} from '../../core/defined';\r\nimport {guid} from '../../core/guid';\r\n\r\nexport let Graph = function (canvas, options) {\r\n    let self = this;\r\n    this._canvas = canvas = typeof canvas === 'string' ? document.getElementById(canvas) : canvas;\r\n    this._ctx = canvas.getContext('2d');\r\n    this._width = canvas.width;\r\n    this._height = canvas.height;\r\n\r\n    this._baseMerge(options);\r\n    this._merge(options);\r\n\r\n    /**\r\n     * 数据\r\n     * @private\r\n     */\r\n    this._data = {};\r\n\r\n    /**\r\n     * 百分比\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    this._percentage = 0;\r\n\r\n    this._animation = new Animation({\r\n        frame: this.refresh.bind(this),\r\n        repeat: this._options.repeat,\r\n        duration: this._options.duration\r\n    });\r\n    this._animation.start();\r\n};\r\n\r\nGraph.prototype = {\r\n\r\n    /**\r\n     * 基类中通用的配置项合并\r\n     * @param options\r\n     * @private\r\n     */\r\n    _baseMerge: function (options) {\r\n\r\n        /**\r\n         * 配置项\r\n         */\r\n        this._options = defaultValue(options, {});\r\n\r\n        /**\r\n         * 重复\r\n         */\r\n        this._options.repeat = defaultValue(options.repeat, false);\r\n\r\n        /**\r\n         * 持续时间\r\n         */\r\n        this._options.duration = defaultValue(options.duration, 1000);\r\n    },\r\n\r\n    /**\r\n     * 需要子类实现的自定义配置项合并\r\n     * @private\r\n     */\r\n    _merge: function () {\r\n        throw new Error('Not implemented');\r\n    },\r\n\r\n    update: function (options) {\r\n        //todo 在运行过程中改变配置\r\n    },\r\n\r\n    /**\r\n     * 增加一行数据\r\n     * @param d\r\n     */\r\n    add: function (d) {\r\n        if (!d) {\r\n            return;\r\n        }\r\n        if (!defined(d.id)) {\r\n            d.id = guid();\r\n        }\r\n\r\n        this._data[d.id] = d;\r\n        this.refresh();\r\n    },\r\n\r\n    /**\r\n     * 删除一行数据\r\n     * @param id\r\n     * @returns {boolean}\r\n     */\r\n    remove: function (id) {\r\n        return delete this._data[id];\r\n    },\r\n\r\n    /**\r\n     * 数据改变\r\n     * @param data\r\n     */\r\n    data: function (data) {\r\n        this._data = {};\r\n        for (var i = 0, len = data.length; i < len; i++) {\r\n            let d = data[i];\r\n            let id = defined(d.id) ? d.id : guid();\r\n            this._data[id] = d;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 暂停\r\n     */\r\n    pause: function () {\r\n        this._animation.pause();\r\n    },\r\n\r\n    /**\r\n     * 继续\r\n     */\r\n    resume: function () {\r\n        this._animation.resume();\r\n    },\r\n\r\n    /**\r\n     * 内部绘制\r\n     * @param data\r\n     * @private\r\n     */\r\n    _draw: function (data) {\r\n        //需子类实现，绘制图形\r\n        throw new Error('Not implemented');\r\n    },\r\n\r\n    /**\r\n     * 刷新\r\n     * @param percentage\r\n     */\r\n    refresh: function (percentage) {\r\n        let ctx = this._ctx;\r\n        ctx.clearRect(0, 0, this._width, this._height);\r\n\r\n        if (percentage !== undefined) {\r\n            this._percentage = percentage;\r\n        }\r\n\r\n        for (var id in this._data) {\r\n            var p = this._data[id];\r\n            this._draw(p);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 释放\r\n     */\r\n    _dispose: function () {\r\n        this._animation.dispose();\r\n\r\n        this._ctx = null;\r\n        this._data = null;\r\n        this._animation = null;\r\n    },\r\n\r\n    /**\r\n     * 释放\r\n     */\r\n    dispose:function(){\r\n        this._dispose();\r\n        //需要子类实现自定义的释放\r\n        throw new Error('Not implemented');\r\n    }\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/graph/Graph.js\n// module id = 3\n// module chunks = 0","import L from 'leaflet';\r\n\r\nimport {createCanvas} from '../../core/createCanvas';\r\nimport {defaultValue} from '../../core/defaultValue';\r\n\r\nL.GraphLayer = L.Layer.extend({\r\n\r\n    //region -- leaflet调用 --\r\n\r\n    initialize: function (options) {\r\n\r\n        /**\r\n         * 图形对象\r\n         * @type Bubbles\r\n         * @private\r\n         */\r\n        this._graph = null;\r\n\r\n        /**\r\n         * requestAnimationFrame对象\r\n         * @type requestAnimationFrame\r\n         * @private\r\n         */\r\n        this._frame = null;\r\n\r\n        /**\r\n         * 存储的数据\r\n         * @private\r\n         */\r\n        this._data = [];\r\n\r\n        this._options = defaultValue(options, defaultValue.EMPTY_OBJECT);\r\n    },\r\n\r\n    onAdd: function (map) {\r\n        this._map = map;\r\n\r\n        if (!this._canvas) {\r\n            this._canvas = createCanvas(map);\r\n        }\r\n\r\n        map.getPanes().overlayPane.appendChild(this._canvas);\r\n\r\n        map.on('move', this._reset, this);\r\n\r\n        //map.on('movestart', this._moveStart, this);\r\n        //map.on('moveend', this._moveEnd, this);\r\n\r\n        if (map.options.zoomAnimation && L.Browser.any3d) {\r\n            map.on('zoomanim', this._animateZoom, this);\r\n        }\r\n\r\n        this._initGraph();\r\n    },\r\n\r\n    onRemove: function (map) {\r\n        map.getPanes().overlayPane.removeChild(this._canvas);\r\n\r\n        map.off('move', this._reset, this);\r\n\r\n        //map.off('movestart', this._moveStart, this);\r\n        //map.off('moveend', this._moveEnd, this);\r\n\r\n        if (map.options.zoomAnimation) {\r\n            map.off('zoomanim', this._animateZoom, this);\r\n        }\r\n\r\n        this.dispose();\r\n    },\r\n\r\n    addTo: function (map) {\r\n        map.addLayer(this);\r\n        return this;\r\n    },\r\n\r\n    dispose: function () {\r\n        L.Util.cancelAnimFrame(this._frame);\r\n        this._graph.dispose();\r\n\r\n        this._frame = null;\r\n        this._graph = null;\r\n        this._data = null;\r\n        this._options = null;\r\n    },\r\n\r\n    //endregion\r\n\r\n    //region -- privite --\r\n\r\n    /**\r\n     * 初始化图表\r\n     * @private\r\n     */\r\n    _initGraph: function () {\r\n        throw new Error('Not implemented');\r\n    },\r\n\r\n    /**\r\n     * 绘制\r\n     * @private\r\n     */\r\n    _redraw: function () {\r\n        throw new Error('Not implemented');\r\n    },\r\n\r\n    _reset: function () {\r\n        let topLeft = this._map.containerPointToLayerPoint([0, 0]);\r\n        L.DomUtil.setPosition(this._canvas, topLeft);\r\n\r\n        let size = this._map.getSize();\r\n\r\n        if (this._graph._width !== size.x) {\r\n            this._canvas.width = this._graph._width = size.x;\r\n        }\r\n        if (this._graph._height !== size.y) {\r\n            this._canvas.height = this._graph._height = size.y;\r\n        }\r\n\r\n        this._redraw();\r\n    },\r\n\r\n    _animateZoom: function (e) {\r\n        let scale = this._map.getZoomScale(e.zoom),\r\n            offset = this._map._getCenterOffset(e.center)._multiplyBy(-scale).subtract(this._map._getMapPanePos());\r\n\r\n        if (L.DomUtil.setTransform) {\r\n            L.DomUtil.setTransform(this._canvas, offset, scale);\r\n        } else {\r\n            this._canvas.style[L.DomUtil.TRANSFORM] = L.DomUtil.getTranslateString(offset) + ' scale(' + scale + ')';\r\n        }\r\n    },\r\n\r\n    //endregion\r\n\r\n    redraw: function () {\r\n        if (this._graph && !this._frame && this._map && !this._map._animating) {\r\n            this._frame = L.Util.requestAnimFrame(this._redraw, this);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    data: function (data) {\r\n        this._data = data;\r\n        this.redraw();\r\n    },\r\n\r\n    remove: function (id) {\r\n        var data = this._data;\r\n        for (let i = 0, len = data.length; i < len;) {\r\n            if (data[i].id === id) {\r\n                data.splice(i, 1);\r\n                len--;\r\n            } else {\r\n                i++;\r\n            }\r\n        }\r\n        this.redraw();\r\n    },\r\n\r\n    removeAll: function () {\r\n        this._data.length = 0;\r\n        this.redraw();\r\n    }\r\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/graph/leaflet-graph.js\n// module id = 4\n// module chunks = 0","var kCSSColorTable = {\n    'transparent': [0, 0, 0, 0], 'aliceblue': [240, 248, 255, 1],\n    'antiquewhite': [250, 235, 215, 1], 'aqua': [0, 255, 255, 1],\n    'aquamarine': [127, 255, 212, 1], 'azure': [240, 255, 255, 1],\n    'beige': [245, 245, 220, 1], 'bisque': [255, 228, 196, 1],\n    'black': [0, 0, 0, 1], 'blanchedalmond': [255, 235, 205, 1],\n    'blue': [0, 0, 255, 1], 'blueviolet': [138, 43, 226, 1],\n    'brown': [165, 42, 42, 1], 'burlywood': [222, 184, 135, 1],\n    'cadetblue': [95, 158, 160, 1], 'chartreuse': [127, 255, 0, 1],\n    'chocolate': [210, 105, 30, 1], 'coral': [255, 127, 80, 1],\n    'cornflowerblue': [100, 149, 237, 1], 'cornsilk': [255, 248, 220, 1],\n    'crimson': [220, 20, 60, 1], 'cyan': [0, 255, 255, 1],\n    'darkblue': [0, 0, 139, 1], 'darkcyan': [0, 139, 139, 1],\n    'darkgoldenrod': [184, 134, 11, 1], 'darkgray': [169, 169, 169, 1],\n    'darkgreen': [0, 100, 0, 1], 'darkgrey': [169, 169, 169, 1],\n    'darkkhaki': [189, 183, 107, 1], 'darkmagenta': [139, 0, 139, 1],\n    'darkolivegreen': [85, 107, 47, 1], 'darkorange': [255, 140, 0, 1],\n    'darkorchid': [153, 50, 204, 1], 'darkred': [139, 0, 0, 1],\n    'darksalmon': [233, 150, 122, 1], 'darkseagreen': [143, 188, 143, 1],\n    'darkslateblue': [72, 61, 139, 1], 'darkslategray': [47, 79, 79, 1],\n    'darkslategrey': [47, 79, 79, 1], 'darkturquoise': [0, 206, 209, 1],\n    'darkviolet': [148, 0, 211, 1], 'deeppink': [255, 20, 147, 1],\n    'deepskyblue': [0, 191, 255, 1], 'dimgray': [105, 105, 105, 1],\n    'dimgrey': [105, 105, 105, 1], 'dodgerblue': [30, 144, 255, 1],\n    'firebrick': [178, 34, 34, 1], 'floralwhite': [255, 250, 240, 1],\n    'forestgreen': [34, 139, 34, 1], 'fuchsia': [255, 0, 255, 1],\n    'gainsboro': [220, 220, 220, 1], 'ghostwhite': [248, 248, 255, 1],\n    'gold': [255, 215, 0, 1], 'goldenrod': [218, 165, 32, 1],\n    'gray': [128, 128, 128, 1], 'green': [0, 128, 0, 1],\n    'greenyellow': [173, 255, 47, 1], 'grey': [128, 128, 128, 1],\n    'honeydew': [240, 255, 240, 1], 'hotpink': [255, 105, 180, 1],\n    'indianred': [205, 92, 92, 1], 'indigo': [75, 0, 130, 1],\n    'ivory': [255, 255, 240, 1], 'khaki': [240, 230, 140, 1],\n    'lavender': [230, 230, 250, 1], 'lavenderblush': [255, 240, 245, 1],\n    'lawngreen': [124, 252, 0, 1], 'lemonchiffon': [255, 250, 205, 1],\n    'lightblue': [173, 216, 230, 1], 'lightcoral': [240, 128, 128, 1],\n    'lightcyan': [224, 255, 255, 1], 'lightgoldenrodyellow': [250, 250, 210, 1],\n    'lightgray': [211, 211, 211, 1], 'lightgreen': [144, 238, 144, 1],\n    'lightgrey': [211, 211, 211, 1], 'lightpink': [255, 182, 193, 1],\n    'lightsalmon': [255, 160, 122, 1], 'lightseagreen': [32, 178, 170, 1],\n    'lightskyblue': [135, 206, 250, 1], 'lightslategray': [119, 136, 153, 1],\n    'lightslategrey': [119, 136, 153, 1], 'lightsteelblue': [176, 196, 222, 1],\n    'lightyellow': [255, 255, 224, 1], 'lime': [0, 255, 0, 1],\n    'limegreen': [50, 205, 50, 1], 'linen': [250, 240, 230, 1],\n    'magenta': [255, 0, 255, 1], 'maroon': [128, 0, 0, 1],\n    'mediumaquamarine': [102, 205, 170, 1], 'mediumblue': [0, 0, 205, 1],\n    'mediumorchid': [186, 85, 211, 1], 'mediumpurple': [147, 112, 219, 1],\n    'mediumseagreen': [60, 179, 113, 1], 'mediumslateblue': [123, 104, 238, 1],\n    'mediumspringgreen': [0, 250, 154, 1], 'mediumturquoise': [72, 209, 204, 1],\n    'mediumvioletred': [199, 21, 133, 1], 'midnightblue': [25, 25, 112, 1],\n    'mintcream': [245, 255, 250, 1], 'mistyrose': [255, 228, 225, 1],\n    'moccasin': [255, 228, 181, 1], 'navajowhite': [255, 222, 173, 1],\n    'navy': [0, 0, 128, 1], 'oldlace': [253, 245, 230, 1],\n    'olive': [128, 128, 0, 1], 'olivedrab': [107, 142, 35, 1],\n    'orange': [255, 165, 0, 1], 'orangered': [255, 69, 0, 1],\n    'orchid': [218, 112, 214, 1], 'palegoldenrod': [238, 232, 170, 1],\n    'palegreen': [152, 251, 152, 1], 'paleturquoise': [175, 238, 238, 1],\n    'palevioletred': [219, 112, 147, 1], 'papayawhip': [255, 239, 213, 1],\n    'peachpuff': [255, 218, 185, 1], 'peru': [205, 133, 63, 1],\n    'pink': [255, 192, 203, 1], 'plum': [221, 160, 221, 1],\n    'powderblue': [176, 224, 230, 1], 'purple': [128, 0, 128, 1],\n    'red': [255, 0, 0, 1], 'rosybrown': [188, 143, 143, 1],\n    'royalblue': [65, 105, 225, 1], 'saddlebrown': [139, 69, 19, 1],\n    'salmon': [250, 128, 114, 1], 'sandybrown': [244, 164, 96, 1],\n    'seagreen': [46, 139, 87, 1], 'seashell': [255, 245, 238, 1],\n    'sienna': [160, 82, 45, 1], 'silver': [192, 192, 192, 1],\n    'skyblue': [135, 206, 235, 1], 'slateblue': [106, 90, 205, 1],\n    'slategray': [112, 128, 144, 1], 'slategrey': [112, 128, 144, 1],\n    'snow': [255, 250, 250, 1], 'springgreen': [0, 255, 127, 1],\n    'steelblue': [70, 130, 180, 1], 'tan': [210, 180, 140, 1],\n    'teal': [0, 128, 128, 1], 'thistle': [216, 191, 216, 1],\n    'tomato': [255, 99, 71, 1], 'turquoise': [64, 224, 208, 1],\n    'violet': [238, 130, 238, 1], 'wheat': [245, 222, 179, 1],\n    'white': [255, 255, 255, 1], 'whitesmoke': [245, 245, 245, 1],\n    'yellow': [255, 255, 0, 1], 'yellowgreen': [154, 205, 50, 1]\n};\n\nfunction clampCssByte(i) {  // Clamp to integer 0 .. 255.\n    i = Math.round(i);  // Seems to be what Chrome does (vs truncation).\n    return i < 0 ? 0 : i > 255 ? 255 : i;\n}\n\nfunction clampCssAngle(i) {  // Clamp to integer 0 .. 360.\n    i = Math.round(i);  // Seems to be what Chrome does (vs truncation).\n    return i < 0 ? 0 : i > 360 ? 360 : i;\n}\n\nfunction clampCssFloat(f) {  // Clamp to float 0.0 .. 1.0.\n    return f < 0 ? 0 : f > 1 ? 1 : f;\n}\n\nfunction parseCssInt(str) {  // int or percentage.\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssByte(parseFloat(str) / 100 * 255);\n    }\n    return clampCssByte(parseInt(str, 10));\n}\n\nfunction parseCssFloat(str) {  // float or percentage.\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssFloat(parseFloat(str) / 100);\n    }\n    return clampCssFloat(parseFloat(str));\n}\n\nfunction cssHueToRgb(m1, m2, h) {\n    if (h < 0) {\n        h += 1;\n    }\n    else if (h > 1) {\n        h -= 1;\n    }\n\n    if (h * 6 < 1) {\n        return m1 + (m2 - m1) * h * 6;\n    }\n    if (h * 2 < 1) {\n        return m2;\n    }\n    if (h * 3 < 2) {\n        return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n    }\n    return m1;\n}\n\nfunction hsla2rgba(hsla) {\n    var h = (((parseFloat(hsla[0]) % 360) + 360) % 360) / 360;  // 0 .. 1\n    // NOTE(deanm): According to the CSS spec s/l should only be\n    // percentages, but we don't bother and let float or percentage.\n    var s = parseCssFloat(hsla[1]);\n    var l = parseCssFloat(hsla[2]);\n    var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n    var m1 = l * 2 - m2;\n\n    var rgba = [\n        clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255),\n        clampCssByte(cssHueToRgb(m1, m2, h) * 255),\n        clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255)\n    ];\n\n    if (hsla.length === 4) {\n        rgba[3] = hsla[3];\n    }\n\n    return rgba;\n}\n\nfunction parseColor(colorStr) {\n    if (!colorStr) {\n        return;\n    }\n    // colorStr in a Object with r,g,b,a\n    if (typeof colorStr == 'object') {\n        var r = colorStr.r,\n            g = colorStr.g,\n            b = colorStr.b,\n            a = colorStr.a;\n        return [r, g, b, a];\n    }\n\n    // colorStr may be not string\n    colorStr = colorStr + '';\n    // Remove all whitespace, not compliant, but should just be more accepting.\n    var str = colorStr.replace(/ /g, '').toLowerCase();\n\n    // Color keywords (and transparent) lookup.\n    if (str in kCSSColorTable) {\n        return kCSSColorTable[str].slice();  // dup.\n    }\n\n    // #abc and #abc123 syntax.\n    if (str.charAt(0) === '#') {\n        if (str.length === 4) {\n            var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n            if (!(iv >= 0 && iv <= 0xfff)) {\n                return;  // Covers NaN.\n            }\n            return [\n                ((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8),\n                (iv & 0xf0) | ((iv & 0xf0) >> 4),\n                (iv & 0xf) | ((iv & 0xf) << 4),\n                1\n            ];\n        }\n        else if (str.length === 7) {\n            var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n            if (!(iv >= 0 && iv <= 0xffffff)) {\n                return;  // Covers NaN.\n            }\n            return [\n                (iv & 0xff0000) >> 16,\n                (iv & 0xff00) >> 8,\n                iv & 0xff,\n                1\n            ];\n        }\n        else if (str.length === 9) {\n            var al = parseInt(str.substr(1, 2), 16) / 255;\n\n            var iv = parseInt(str.substr(3), 16);  // TODO(deanm): Stricter parsing.\n            if (!(iv >= 0 && iv <= 0xffffff)) {\n                return;  // Covers NaN.\n            }\n            return [\n                (iv & 0xff0000) >> 16,\n                (iv & 0xff00) >> 8,\n                iv & 0xff,\n                al\n            ];\n        }\n\n        return;\n    }\n    var op = str.indexOf('('), ep = str.indexOf(')');\n    if (op !== -1 && ep + 1 === str.length) {\n        var fname = str.substr(0, op);\n        var params = str.substr(op + 1, ep - (op + 1)).split(',');\n        var alpha = 1;  // To allow case fallthrough.\n        switch (fname) {\n            case 'rgba':\n                if (params.length !== 4) {\n                    return;\n                }\n                alpha = parseCssFloat(params.pop()); // jshint ignore:line\n            // Fall through.\n            case 'rgb':\n                if (params.length !== 3) {\n                    return;\n                }\n                return [\n                    parseCssInt(params[0]),\n                    parseCssInt(params[1]),\n                    parseCssInt(params[2]),\n                    alpha\n                ];\n            case 'hsla':\n                if (params.length !== 4) {\n                    return;\n                }\n                params[3] = parseCssFloat(params[3]);\n                return hsla2rgba(params);\n            case 'hsl':\n                if (params.length !== 3) {\n                    return;\n                }\n                return hsla2rgba(params);\n            default:\n                return;\n        }\n    }\n\n    return;\n}\n\nfunction stringify(arrColor, type) {\n    type = type || 'rgba';\n    var colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\n    if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\n        colorStr += ',' + arrColor[3];\n    }\n    return type + '(' + colorStr + ')';\n}\n\n\nfunction Color(r, g, b, a) {\n    if (Object.prototype.toString.call(r) == '[object Array]') {\n        this.r = r[0];\n        this.g = r[1];\n        this.b = r[2];\n        this.a = r[3];\n    } else {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n\n    this.r = this.r == null ? 255 : this.r;\n    this.g = this.g == null ? 255 : this.g;\n    this.b = this.b == null ? 255 : this.b;\n    this.a = this.a == null ? 1 : this.a;\n}\n\nColor.prototype.toArray = function () {\n    return [this.r, this.g, this.b, this.a];\n};\n\nColor.prototype.toRGBA = function () {\n    var arrColor = this.toArray();\n    return stringify(arrColor, 'rgba');\n};\n\nColor.prototype.toRGB = function () {\n    var arrColor = this.toArray();\n    return stringify(arrColor, 'rgb');\n};\n\nColor.prototype.withAlpha = function (alpha) {\n    this.a = alpha;\n    return this;\n};\n\nColor.prototype.withAlphaRatio = function (ratio) {\n    this.a *= ratio;\n    return this;\n};\n\nColor.parse = function (colorStr) {\n    var arrColor = parseColor(colorStr),\n        color = new Color(arrColor);\n\n    return color;\n};\n\nColor.clone = function (color) {\n    return new Color(color.r, color.g, color.b, color.a);\n};\n\nexport {Color};\n\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/Color.js\n// module id = 5\n// module chunks = 0","import L from 'leaflet';\r\nexport * from './components/bubble/leaflet-bubbles';\r\nexport * from './components/point/leaflet-points';\r\nexport * from './components/image/leaflet-images';\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.js\n// module id = 6\n// module chunks = 0","import L from 'leaflet';\r\n\r\nimport {Bubbles} from './Bubbles';\r\nimport {GrapgLayer} from '../graph/leaflet-graph';\r\n\r\n\r\n\r\nL.BubbleLayer = L.GraphLayer.extend({\r\n\r\n    //region -- privite --\r\n\r\n    _initGraph: function () {\r\n        this._graph = new Bubbles(this._canvas, this._options);\r\n    },\r\n\r\n    _redraw: function () {\r\n        let map = this._map;\r\n        if (!map) {\r\n            return;\r\n        }\r\n\r\n        var size = this._map.getSize(),\r\n            bounds = new L.Bounds(L.point([0, 0]), size);\r\n\r\n        var data = [];\r\n        for (var i = 0, len = this._data.length; i < len; i++) {\r\n            var p = this._data[i];\r\n\r\n            var point = this._map.latLngToContainerPoint([p.lat, p.lon]);\r\n            if (bounds.contains(point)) {\r\n                var d = {\r\n                    id: p.id,\r\n                    x: point.x,\r\n                    y: point.y,\r\n                    radius: p.radius,\r\n                    color: p.color\r\n                };\r\n                data.push(d);\r\n            }\r\n        }\r\n\r\n        this._graph.data(data);\r\n        this._graph.refresh();\r\n        this._frame = null;\r\n    },\r\n\r\n    //endregion\r\n});\r\n\r\nL.bubbleLayer = function (options) {\r\n    return new L.BubbleLayer(options);\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/bubble/leaflet-bubbles.js\n// module id = 7\n// module chunks = 0","import {Color} from '../../core/Color';\r\nimport {inherit} from '../../core/inherit';\r\n\r\nimport {Graph} from '../graph/Graph';\r\n\r\nexport let Bubbles = function (canvas, options) {\r\n    Graph.apply(this, arguments);\r\n};\r\n\r\nBubbles.prototype = {\r\n\r\n    /**\r\n     * 合并配置项\r\n     * @private\r\n     */\r\n    _merge: function () {\r\n\r\n    },\r\n\r\n    /**\r\n     * 内部绘制\r\n     * @param data\r\n     * @private\r\n     */\r\n    _draw: function (data) {\r\n        let ctx = this._ctx;\r\n        var r = this._percentage * data.radius;\r\n        let grd = ctx.createRadialGradient(data.x, data.y, 0, data.x, data.y, r);\r\n        var color = Color.parse(data.color);\r\n        grd.addColorStop(0, Color.clone(color).withAlpha(0).toRGBA());\r\n        grd.addColorStop(1, Color.clone(color).withAlphaRatio(0.7).toRGBA());\r\n        ctx.fillStyle = grd;\r\n        ctx.beginPath();\r\n        ctx.arc(data.x, data.y, r, 0, 2 * Math.PI);\r\n        ctx.fill();\r\n    },\r\n\r\n    /**\r\n     * 释放\r\n     */\r\n    dispose: function () {\r\n        this._dispose();\r\n    }\r\n};\r\n\r\ninherit(Bubbles, Graph);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/bubble/Bubbles.js\n// module id = 8\n// module chunks = 0","import {requestAnimationFrame} from './requestAnimationFrame';\r\nimport {defaultValue} from '../core/defaultValue';\r\n\r\nexport let Animation = function (options) {\r\n\r\n    this._type = Animation.Type.Stop;\r\n\r\n    this._needRefresh = true;\r\n\r\n    this._start;\r\n    this._pause;\r\n    this._pauseTime = 0;\r\n\r\n    this._merge(options);\r\n};\r\n\r\nAnimation.Type = {\r\n    Run: 1,\r\n    Stop: 2,\r\n    Pause: 3\r\n};\r\n\r\nAnimation.prototype = {\r\n\r\n    constructor: Animation,\r\n\r\n    _merge: function (options) {\r\n        options = defaultValue(options, defaultValue.EMPTY_OBJECT);\r\n\r\n        /**\r\n         * 帧行为\r\n         * @type {function}\r\n         * @private\r\n         */\r\n        this._frame = defaultValue(options.frame, defaultValue.EMPTY_FUNCTION);\r\n\r\n        /**\r\n         * 持续时间\r\n         * @type {Number}\r\n         * @private\r\n         */\r\n        this._duration = defaultValue(options.duration, 1000);\r\n\r\n        /**\r\n         * 是否循环\r\n         * @type {Number}\r\n         * @private\r\n         */\r\n        this._repeat = defaultValue(options.repeat, false);\r\n    },\r\n\r\n    _update: function () {\r\n        let percentage;\r\n\r\n        if (this._repeat) {\r\n            let now = new Date();\r\n            let delay = now - this._start - this._pauseTime;\r\n            percentage = delay / this._duration - Math.floor(delay / this._duration);\r\n        } else {\r\n            this._needRefresh = false;\r\n            percentage = 1;\r\n        }\r\n\r\n        this._frame(percentage);\r\n    },\r\n\r\n    _startLoop: function () {\r\n\r\n        function step() {\r\n            if (this._type !== Animation.Type.Stop) {\r\n                requestAnimationFrame(step);\r\n                if (this._type === Animation.Type.Run && this._needRefresh) {\r\n                    this._update();\r\n                }\r\n            }\r\n        }\r\n\r\n        step = step.bind(this);\r\n\r\n        requestAnimationFrame(step);\r\n\r\n    },\r\n\r\n    /**\r\n     * 是否正在执行\r\n     * @returns {boolean}\r\n     */\r\n    isRun: function () {\r\n        return this._type === Animation.Type.Run;\r\n    },\r\n\r\n    /**\r\n     * 是否暂停\r\n     * @returns {boolean}\r\n     */\r\n    isPause: function () {\r\n        return this._type === Animation.Type.Pause;\r\n    },\r\n\r\n    /**\r\n     * 是否停止\r\n     * @returns {boolean}\r\n     */\r\n    isStop: function () {\r\n        return this._type === Animation.Type.Stop;\r\n    },\r\n\r\n    /**\r\n     * 开始\r\n     */\r\n    start: function () {\r\n        this._type = Animation.Type.Run;\r\n        this._start = new Date();\r\n        this._pauseTime = 0;\r\n\r\n        this._startLoop();\r\n    },\r\n\r\n    /**\r\n     * 停止\r\n     */\r\n    stop: function () {\r\n        this._type = Animation.Type.Stop;\r\n    },\r\n\r\n    /**\r\n     * 暂停\r\n     */\r\n    pause: function () {\r\n        if (this._type !== Animation.Type.Pause) {\r\n            this._type = Animation.Type.Pause;\r\n            this._pause = new Date();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 恢复\r\n     */\r\n    resume: function () {\r\n        if (this._type === Animation.Type.Pause) {\r\n            this._type = Animation.Type.Run;\r\n            this._pauseTime += new Date() - this._pause;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 释放\r\n     */\r\n    dispose: function () {\r\n        this.stop();\r\n    }\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/animation/Animation.js\n// module id = 9\n// module chunks = 0","export let requestAnimationFrame =\n    (typeof window !== 'undefined' && (window.requestAnimationFrame || window.msRequestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame))\n    || function (func) {\n        setTimeout(func, 16);\n    };\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/animation/requestAnimationFrame.js\n// module id = 10\n// module chunks = 0","export function defined(value) {\r\n    return value !== undefined && value !== null;\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/defined.js\n// module id = 11\n// module chunks = 0","let idStart = 0x0907;\r\n\r\nexport function guid() {\r\n    return idStart+++'';\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/guid.js\n// module id = 12\n// module chunks = 0","import L from 'leaflet';\r\n\r\nexport function createCanvas(map) {\r\n    let canvas = L.DomUtil.create('canvas', 'leaflet-point-layer leaflet-layer');\r\n\r\n    let originProp = L.DomUtil.testProp(['transformOrigin', 'WebkitTransformOrigin', 'msTransformOrigin']);\r\n    canvas.style[originProp] = '50% 50%';\r\n\r\n    let size = map.getSize();\r\n    canvas.width = size.x;\r\n    canvas.height = size.y;\r\n\r\n    let animated = map.options.zoomAnimation && L.Browser.any3d;\r\n    L.DomUtil.addClass(canvas, 'leaflet-zoom-' + (animated ? 'animated' : 'hide'));\r\n\r\n    return canvas;\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/createCanvas.js\n// module id = 13\n// module chunks = 0","import L from 'leaflet';\r\n\r\nimport {Points} from './Points';\r\nimport {GrapgLayer} from '../graph/leaflet-graph';\r\n\r\n\r\n\r\nL.PointLayer = L.GraphLayer.extend({\r\n\r\n    //region -- privite --\r\n\r\n    _initGraph: function () {\r\n        this._graph = new Points(this._canvas, this._options);\r\n    },\r\n\r\n    _redraw: function () {\r\n        let map = this._map;\r\n        if (!map) {\r\n            return;\r\n        }\r\n\r\n        var size = this._map.getSize(),\r\n            bounds = new L.Bounds(L.point([0, 0]), size);\r\n\r\n        var data = [];\r\n        for (var i = 0, len = this._data.length; i < len; i++) {\r\n            var p = this._data[i];\r\n\r\n            var point = this._map.latLngToContainerPoint([p.lat, p.lon]);\r\n            if (bounds.contains(point)) {\r\n                var d = {\r\n                    id: p.id,\r\n                    x: point.x,\r\n                    y: point.y,\r\n                    radius: p.radius,\r\n                    color: p.color\r\n                };\r\n                data.push(d);\r\n            }\r\n        }\r\n\r\n        this._graph.data(data);\r\n        this._graph.refresh();\r\n        this._frame = null;\r\n    },\r\n\r\n    //endregion\r\n});\r\n\r\nL.pointLayer = function (options) {\r\n    return new L.PointLayer(options);\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/point/leaflet-points.js\n// module id = 14\n// module chunks = 0","import {Color} from '../../core/Color';\r\nimport {inherit} from '../../core/inherit';\r\nimport {defaultValue} from '../../core/defaultValue';\r\n\r\nimport {Graph} from '../graph/Graph';\r\n\r\nexport let Points = function (canvas, options) {\r\n    Graph.apply(this, arguments);\r\n};\r\n\r\nPoints.PointType = {\r\n    'Circle': 'Circle',\r\n    'Rect': 'Rect'\r\n};\r\n\r\nPoints.prototype = {\r\n\r\n    /**\r\n     * 合并配置项\r\n     * @private\r\n     */\r\n    _merge: function (options) {\r\n        this._options.pointType = defaultValue(options.pointType, Points.PointType.Circle);\r\n        this._options.images = defaultValue(options.images, []);\r\n    },\r\n\r\n    /**\r\n     * 内部绘制\r\n     * @param data\r\n     * @private\r\n     */\r\n    _draw: function (data) {\r\n        let ctx = this._ctx;\r\n        var r = data.radius;\r\n        ctx.fillStyle = data.color;\r\n        ctx.beginPath();\r\n        ctx.arc(data.x, data.y, r, 0, 2 * Math.PI);\r\n        ctx.fill();\r\n    },\r\n\r\n    /**\r\n     * 释放\r\n     */\r\n    dispose: function () {\r\n        this._dispose();\r\n    }\r\n};\r\n\r\ninherit(Points, Graph);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/point/Points.js\n// module id = 15\n// module chunks = 0","import L from 'leaflet';\r\n\r\nimport {Images} from './Images';\r\nimport {GrapgLayer} from '../graph/leaflet-graph';\r\n\r\n\r\nL.ImageLayer = L.GraphLayer.extend({\r\n\r\n    //region -- privite --\r\n\r\n    _initGraph: function () {\r\n        this._graph = new Images(this._canvas, this._options);\r\n    },\r\n\r\n    _redraw: function () {\r\n        let map = this._map;\r\n        if (!map) {\r\n            return;\r\n        }\r\n\r\n        var size = this._map.getSize(),\r\n            bounds = new L.Bounds(L.point([0, 0]), size);\r\n\r\n        var data = [];\r\n        for (var i = 0, len = this._data.length; i < len; i++) {\r\n            var p = this._data[i];\r\n\r\n            var point = this._map.latLngToContainerPoint([p.lat, p.lon]);\r\n            if (bounds.contains(point)) {\r\n                var d = {\r\n                    id: p.id,\r\n                    x: point.x,\r\n                    y: point.y,\r\n                    image: p.image\r\n                };\r\n                data.push(d);\r\n            }\r\n        }\r\n\r\n        this._graph.data(data);\r\n        this._graph.refresh();\r\n        this._frame = null;\r\n    },\r\n\r\n    //endregion\r\n});\r\n\r\nL.imageLayer = function (options) {\r\n    return new L.ImageLayer(options);\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/image/leaflet-images.js\n// module id = 16\n// module chunks = 0","import {inherit} from '../../core/inherit';\r\nimport {defaultValue} from '../../core/defaultValue';\r\n\r\nimport {Graph} from '../graph/Graph';\r\n\r\nexport let Images = function (canvas, options) {\r\n    Graph.apply(this, arguments);\r\n\r\n    /**\r\n     * 图片缓存对象\r\n     * @type {{}}\r\n     * @private\r\n     */\r\n    this._images = {};\r\n\r\n    this._loadImage();\r\n};\r\n\r\nImages.prototype = {\r\n\r\n    /**\r\n     * 合并配置项\r\n     * @private\r\n     */\r\n    _merge: function (options) {\r\n        this._options.images = defaultValue(options.images, []);\r\n    },\r\n\r\n    /**\r\n     * 图片\r\n     * @private\r\n     */\r\n    _loadImage: function () {\r\n        var self = this;\r\n        for (var i = 0, len = this._options.images.length; i < len; i++) {\r\n            var imagePath = this._options.images[i],\r\n                image = new Image();\r\n            image.src = imagePath;\r\n            this._images[imagePath] = image;\r\n\r\n            (function (imagePath) {\r\n                image.onload = function () {\r\n                    self._images[imagePath].ready = true;\r\n                };\r\n            })(imagePath);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 内部绘制\r\n     * @param data\r\n     * @private\r\n     */\r\n    _draw: function (data) {\r\n        let ctx = this._ctx;\r\n\r\n        var image = this._images[data.image];\r\n        let width = image.width,\r\n            height = image.height;\r\n        ctx.drawImage(image, data.x - width / 2, data.y - height / 2, width, height);\r\n    },\r\n\r\n    /**\r\n     * 释放\r\n     */\r\n    dispose: function () {\r\n        this._dispose();\r\n    }\r\n};\r\n\r\ninherit(Images, Graph);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/image/Images.js\n// module id = 17\n// module chunks = 0"],"sourceRoot":""}